import os
from web3.auto import w3

VOTING_ADDRESS = os.environ['BN_UPDATER_SEED_VOTING_ADDRESS']
VOTING_ABI = '[{"constant": true, "inputs": [], "name": "hasInitialized", "outputs": [{"name": "", "type": "bool"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [{"name": "_script", "type": "bytes"}], "name": "getEVMScriptExecutor", "outputs": [{"name": "", "type": "address"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [], "name": "getRecoveryVault", "outputs": [{"name": "", "type": "address"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [], "name": "MODIFY_QUORUM_ROLE", "outputs": [{"name": "", "type": "bytes32"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [], "name": "MODIFY_SUPPORT_ROLE", "outputs": [{"name": "", "type": "bytes32"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [{"name": "token", "type": "address"}], "name": "allowRecoverability", "outputs": [{"name": "", "type": "bool"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [], "name": "appId", "outputs": [{"name": "", "type": "bytes32"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [], "name": "getInitializationBlock", "outputs": [{"name": "", "type": "uint256"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": false, "inputs": [{"name": "_token", "type": "address"}], "name": "transferToVault", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function"}, {"constant": true, "inputs": [{"name": "_sender", "type": "address"}, {"name": "_role", "type": "bytes32"}, {"name": "_params", "type": "uint256[]"}], "name": "canPerform", "outputs": [{"name": "", "type": "bool"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [], "name": "getEVMScriptRegistry", "outputs": [{"name": "", "type": "address"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [], "name": "voteTime", "outputs": [{"name": "", "type": "uint64"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [], "name": "CREATE_VOTES_ROLE", "outputs": [{"name": "", "type": "bytes32"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [], "name": "kernel", "outputs": [{"name": "", "type": "address"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [], "name": "minAcceptQuorumPct", "outputs": [{"name": "", "type": "uint64"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [], "name": "isPetrified", "outputs": [{"name": "", "type": "bool"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [], "name": "votesLength", "outputs": [{"name": "", "type": "uint256"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [], "name": "supportRequiredPct", "outputs": [{"name": "", "type": "uint64"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [], "name": "token", "outputs": [{"name": "", "type": "address"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [], "name": "PCT_BASE", "outputs": [{"name": "", "type": "uint64"}], "payable": false, "stateMutability": "view", "type": "function"}, {"anonymous": false, "inputs": [{"indexed": true, "name": "voteId", "type": "uint256"}, {"indexed": true, "name": "creator", "type": "address"}, {"indexed": false, "name": "metadata", "type": "string"}], "name": "StartVote", "type": "event"}, {"anonymous": false, "inputs": [{"indexed": true, "name": "voteId", "type": "uint256"}, {"indexed": true, "name": "voter", "type": "address"}, {"indexed": false, "name": "supports", "type": "bool"}, {"indexed": false, "name": "stake", "type": "uint256"}], "name": "CastVote", "type": "event"}, {"anonymous": false, "inputs": [{"indexed": true, "name": "voteId", "type": "uint256"}], "name": "ExecuteVote", "type": "event"}, {"anonymous": false, "inputs": [{"indexed": false, "name": "supportRequiredPct", "type": "uint64"}], "name": "ChangeSupportRequired", "type": "event"}, {"anonymous": false, "inputs": [{"indexed": false, "name": "minAcceptQuorumPct", "type": "uint64"}], "name": "ChangeMinQuorum", "type": "event"}, {"anonymous": false, "inputs": [{"indexed": true, "name": "executor", "type": "address"}, {"indexed": false, "name": "script", "type": "bytes"}, {"indexed": false, "name": "input", "type": "bytes"}, {"indexed": false, "name": "returnData", "type": "bytes"}], "name": "ScriptResult", "type": "event"}, {"anonymous": false, "inputs": [{"indexed": true, "name": "vault", "type": "address"}, {"indexed": true, "name": "token", "type": "address"}, {"indexed": false, "name": "amount", "type": "uint256"}], "name": "RecoverToVault", "type": "event"}, {"constant": false, "inputs": [{"name": "_token", "type": "address"}, {"name": "_supportRequiredPct", "type": "uint64"}, {"name": "_minAcceptQuorumPct", "type": "uint64"}, {"name": "_voteTime", "type": "uint64"}], "name": "initialize", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function"}, {"constant": false, "inputs": [{"name": "_supportRequiredPct", "type": "uint64"}], "name": "changeSupportRequiredPct", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function"}, {"constant": false, "inputs": [{"name": "_minAcceptQuorumPct", "type": "uint64"}], "name": "changeMinAcceptQuorumPct", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function"}, {"constant": false, "inputs": [{"name": "_executionScript", "type": "bytes"}, {"name": "_metadata", "type": "string"}], "name": "newVote", "outputs": [{"name": "voteId", "type": "uint256"}], "payable": false, "stateMutability": "nonpayable", "type": "function"}, {"constant": false, "inputs": [{"name": "_executionScript", "type": "bytes"}, {"name": "_metadata", "type": "string"}, {"name": "_castVote", "type": "bool"}, {"name": "_executesIfDecided", "type": "bool"}], "name": "newVote", "outputs": [{"name": "voteId", "type": "uint256"}], "payable": false, "stateMutability": "nonpayable", "type": "function"}, {"constant": false, "inputs": [{"name": "_voteId", "type": "uint256"}, {"name": "_supports", "type": "bool"}, {"name": "_executesIfDecided", "type": "bool"}], "name": "vote", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function"}, {"constant": false, "inputs": [{"name": "_voteId", "type": "uint256"}], "name": "executeVote", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function"}, {"constant": true, "inputs": [], "name": "isForwarder", "outputs": [{"name": "", "type": "bool"}], "payable": false, "stateMutability": "pure", "type": "function"}, {"constant": false, "inputs": [{"name": "_evmScript", "type": "bytes"}], "name": "forward", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function"}, {"constant": true, "inputs": [{"name": "_sender", "type": "address"}, {"name": "", "type": "bytes"}], "name": "canForward", "outputs": [{"name": "", "type": "bool"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [{"name": "_voteId", "type": "uint256"}], "name": "canExecute", "outputs": [{"name": "", "type": "bool"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [{"name": "_voteId", "type": "uint256"}, {"name": "_voter", "type": "address"}], "name": "canVote", "outputs": [{"name": "", "type": "bool"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [{"name": "_voteId", "type": "uint256"}], "name": "getVote", "outputs": [{"name": "open", "type": "bool"}, {"name": "executed", "type": "bool"}, {"name": "startDate", "type": "uint64"}, {"name": "snapshotBlock", "type": "uint64"}, {"name": "supportRequired", "type": "uint64"}, {"name": "minAcceptQuorum", "type": "uint64"}, {"name": "yea", "type": "uint256"}, {"name": "nay", "type": "uint256"}, {"name": "votingPower", "type": "uint256"}, {"name": "script", "type": "bytes"}], "payable": false, "stateMutability": "view", "type": "function"}, {"constant": true, "inputs": [{"name": "_voteId", "type": "uint256"}, {"name": "_voter", "type": "address"}], "name": "getVoterState", "outputs": [{"name": "", "type": "uint8"}], "payable": false, "stateMutability": "view", "type": "function"}]'

MAINNET_SP_ADDRESS = w3.toChecksumAddress(
    os.environ['BN_UPDATER_SP_ADDRESS_MAINNET'])
IDCHAIN_SP_ADDRESS = w3.toChecksumAddress(
    os.environ['BN_UPDATER_SP_ADDRESS_IDCHAIN'])
SP_ABI = '[{"inputs": [], "constant": true, "name": "name", "outputs": [{"type": "string", "name": ""}], "stateMutability": "view", "payable": false, "type": "function"}, {"inputs": [{"type": "address", "name": "spender"}, {"type": "uint256", "name": "value"}], "constant": false, "name": "approve", "outputs": [{"type": "bool", "name": ""}], "stateMutability": "nonpayable", "payable": false, "type": "function"}, {"inputs": [], "constant": true, "name": "totalSupply", "outputs": [{"type": "uint256", "name": ""}], "stateMutability": "view", "payable": false, "type": "function"}, {"inputs": [{"type": "address", "name": "from"}, {"type": "address", "name": "to"}, {"type": "uint256", "name": "value"}], "constant": false, "name": "transferFrom", "outputs": [{"type": "bool", "name": ""}], "stateMutability": "nonpayable", "payable": false, "type": "function"}, {"inputs": [], "constant": true, "name": "finance", "outputs": [{"type": "address", "name": ""}], "stateMutability": "view", "payable": false, "type": "function"}, {"inputs": [], "constant": true, "name": "decimals", "outputs": [{"type": "uint8", "name": ""}], "stateMutability": "view", "payable": false, "type": "function"}, {"inputs": [{"type": "address", "name": "spender"}, {"type": "uint256", "name": "addedValue"}], "constant": false, "name": "increaseAllowance", "outputs": [{"type": "bool", "name": ""}], "stateMutability": "nonpayable", "payable": false, "type": "function"}, {"inputs": [], "constant": false, "name": "unpause", "outputs": [], "stateMutability": "nonpayable", "payable": false, "type": "function"}, {"inputs": [{"type": "address", "name": "account"}], "constant": true, "name": "isPauser", "outputs": [{"type": "bool", "name": ""}], "stateMutability": "view", "payable": false, "type": "function"}, {"inputs": [{"type": "address", "name": "token"}], "constant": false, "name": "reclaimTokens", "outputs": [], "stateMutability": "nonpayable", "payable": false, "type": "function"}, {"inputs": [], "constant": true, "name": "paused", "outputs": [{"type": "bool", "name": ""}], "stateMutability": "view", "payable": false, "type": "function"}, {"inputs": [], "constant": false, "name": "renouncePauser", "outputs": [], "stateMutability": "nonpayable", "payable": false, "type": "function"}, {"inputs": [{"type": "address", "name": "account"}], "constant": true, "name": "balanceOf", "outputs": [{"type": "uint256", "name": ""}], "stateMutability": "view", "payable": false, "type": "function"}, {"inputs": [], "constant": false, "name": "renounceOwnership", "outputs": [], "stateMutability": "nonpayable", "payable": false, "type": "function"}, {"inputs": [{"type": "address", "name": "account"}], "constant": false, "name": "addPauser", "outputs": [], "stateMutability": "nonpayable", "payable": false, "type": "function"}, {"inputs": [], "constant": false, "name": "pause", "outputs": [], "stateMutability": "nonpayable", "payable": false, "type": "function"}, {"inputs": [], "constant": true, "name": "owner", "outputs": [{"type": "address", "name": ""}], "stateMutability": "view", "payable": false, "type": "function"}, {"inputs": [], "constant": true, "name": "isOwner", "outputs": [{"type": "bool", "name": ""}], "stateMutability": "view", "payable": false, "type": "function"}, {"inputs": [], "constant": true, "name": "symbol", "outputs": [{"type": "string", "name": ""}], "stateMutability": "view", "payable": false, "type": "function"}, {"inputs": [{"type": "address", "name": "account"}], "constant": false, "name": "addMinter", "outputs": [], "stateMutability": "nonpayable", "payable": false, "type": "function"}, {"inputs": [], "constant": false, "name": "renounceMinter", "outputs": [], "stateMutability": "nonpayable", "payable": false, "type": "function"}, {"inputs": [{"type": "address", "name": "_finance"}], "constant": false, "name": "setFinance", "outputs": [], "stateMutability": "nonpayable", "payable": false, "type": "function"}, {"inputs": [{"type": "address", "name": "spender"}, {"type": "uint256", "name": "subtractedValue"}], "constant": false, "name": "decreaseAllowance", "outputs": [{"type": "bool", "name": ""}], "stateMutability": "nonpayable", "payable": false, "type": "function"}, {"inputs": [{"type": "address", "name": "to"}, {"type": "uint256", "name": "value"}], "constant": false, "name": "transfer", "outputs": [{"type": "bool", "name": ""}], "stateMutability": "nonpayable", "payable": false, "type": "function"}, {"inputs": [{"type": "address", "name": "account"}], "constant": true, "name": "isMinter", "outputs": [{"type": "bool", "name": ""}], "stateMutability": "view", "payable": false, "type": "function"}, {"inputs": [{"type": "address", "name": "owner"}, {"type": "address", "name": "spender"}], "constant": true, "name": "allowance", "outputs": [{"type": "uint256", "name": ""}], "stateMutability": "view", "payable": false, "type": "function"}, {"inputs": [{"type": "address", "name": "newOwner"}], "constant": false, "name": "transferOwnership", "outputs": [], "stateMutability": "nonpayable", "payable": false, "type": "function"}, {"inputs": [{"indexed": false, "type": "address", "name": "account"}, {"indexed": false, "type": "bytes32", "name": "contextName"}, {"indexed": false, "type": "uint256", "name": "amount"}], "type": "event", "name": "SponsorshipsAssigned", "anonymous": false}, {"inputs": [{"indexed": false, "type": "address", "name": "tokenAddr"}, {"indexed": false, "type": "uint256", "name": "amount"}], "type": "event", "name": "ReclaimedTokens", "anonymous": false}, {"inputs": [{"indexed": false, "type": "address", "name": "financeAddr"}], "type": "event", "name": "FinanceSet", "anonymous": false}, {"inputs": [{"indexed": true, "type": "address", "name": "previousOwner"}, {"indexed": true, "type": "address", "name": "newOwner"}], "type": "event", "name": "OwnershipTransferred", "anonymous": false}, {"inputs": [{"indexed": true, "type": "address", "name": "account"}], "type": "event", "name": "MinterAdded", "anonymous": false}, {"inputs": [{"indexed": true, "type": "address", "name": "account"}], "type": "event", "name": "MinterRemoved", "anonymous": false}, {"inputs": [{"indexed": false, "type": "address", "name": "account"}], "type": "event", "name": "Paused", "anonymous": false}, {"inputs": [{"indexed": false, "type": "address", "name": "account"}], "type": "event", "name": "Unpaused", "anonymous": false}, {"inputs": [{"indexed": true, "type": "address", "name": "account"}], "type": "event", "name": "PauserAdded", "anonymous": false}, {"inputs": [{"indexed": true, "type": "address", "name": "account"}], "type": "event", "name": "PauserRemoved", "anonymous": false}, {"inputs": [{"indexed": true, "type": "address", "name": "from"}, {"indexed": true, "type": "address", "name": "to"}, {"indexed": false, "type": "uint256", "name": "value"}], "type": "event", "name": "Transfer", "anonymous": false}, {"inputs": [{"indexed": true, "type": "address", "name": "owner"}, {"indexed": true, "type": "address", "name": "spender"}, {"indexed": false, "type": "uint256", "name": "value"}], "type": "event", "name": "Approval", "anonymous": false}, {"inputs": [{"type": "address", "name": "account"}, {"type": "uint256", "name": "amount"}], "constant": false, "name": "mint", "outputs": [{"type": "bool", "name": ""}], "stateMutability": "nonpayable", "payable": false, "type": "function"}, {"inputs": [{"type": "bytes32", "name": "contextName"}, {"type": "uint256", "name": "amount"}], "constant": false, "name": "assignContext", "outputs": [], "stateMutability": "nonpayable", "payable": false, "type": "function"}, {"inputs": [{"type": "bytes32", "name": "contextName"}], "constant": true, "name": "totalContextBalance", "outputs": [{"type": "uint256", "name": ""}], "stateMutability": "view", "payable": false, "type": "function"}, {"inputs": [{"type": "address", "name": "account"}, {"type": "bytes32", "name": "contextName"}], "constant": true, "name": "contextBalance", "outputs": [{"type": "uint256", "name": ""}], "stateMutability": "view", "payable": false, "type": "function"}]'

SPONSOR_EVENT_CONTRACT_ABI = '[{"anonymous": false,"inputs": [{"indexed": true,"internalType": "address","name": "addr","type": "address"}],"name": "Sponsor","type": "event"}]'

MAINNET_WSS = os.environ['BN_UPDATER_MAINNET_WSS']
IDCHAIN_WSS = os.environ['BN_UPDATER_IDCHAIN_WSS']
SEED_GROUPS_WS_URL = os.environ['BN_UPDATER_SEED_GROUPS_WS_URL']

CHUNK = 1000
RECHECK_CHUNK = 10

APPS_JSON_FILE = 'https://apps.brightid.org/apps.json'

BN_ARANGO_PROTOCOL = os.environ['BN_ARANGO_PROTOCOL']
BN_ARANGO_HOST = os.environ['BN_ARANGO_HOST']
BN_ARANGO_PORT = int(os.environ['BN_ARANGO_PORT'])
ARANGO_SERVER = f'{BN_ARANGO_PROTOCOL}://{BN_ARANGO_HOST}:{BN_ARANGO_PORT}'
